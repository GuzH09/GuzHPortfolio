---
import { Image } from 'astro:assets';
import { getLangFromUrl, useTranslations } from '@/i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

interface Props {
  src: ImageMetadata;
  alt: string;
  title: string;
  description: string;
  link?: string;
  class?: string;
  slug?: string;
}

const { src, alt, title, description, link, slug, class: additionalClasses } = Astro.props;
---

<div
  class={`
  ${additionalClasses} 
  flex relative rounded-lg group overflow-hidden border-4
  border-[hsla(202,97%,24%,0.7)]
  dark:border-[hsla(202,97%,76%,0.3)]
  shadow-[0_0_15px_rgb(0,0,0,0.5)]
  `}
>
  <Image
    src={src}
    class="h-full w-full object-cover brightness-90 transition duration-500 ease-out md:group-hover:blur-sm md:group-hover:brightness-50"
    alt={alt}
  />
  <div
    class={`
    bg-gradient-to-b from-[#171a21]/10 to-[#171a21cc]/90 
    px-2 w-full h-full 
    z-10 absolute bottom-0 left-0 
    flex flex-col items-center justify-center gap-3 
    transform translate-y-full md:group-hover:translate-y-0 transition ease-in duration-300 
    `}
  >
    <h4 class="text-3xl font-semibold text-[#88d2fd] sm:text-4xl md:text-3xl lg:text-2xl xl:text-2xl 2xl:text-3xl">
      {title}
    </h4>
    <p class="text-white lg:text-base">
      {description}
    </p>

    {
      link && (
        <a class="flex flex-row items-center justify-center gap-2" href={link} target="_blank">
          <p class="text-white underline">{t('portfolio.button.site')}</p>
          <i class="fa-solid fa-arrow-up-right-from-square text-[#88d2fd] lg:text-base 2xl:text-2xl" />
        </a>
      )
    }
    {
      slug && (
        <a class="flex flex-row items-center justify-center gap-2" href={slug}>
          <p class="text-white underline">{t('portfolio.button.details')}</p>
          <i class="fa-solid fa-arrow-up-right-from-square text-[#88d2fd] lg:text-base 2xl:text-2xl" />
        </a>
      )
    }
  </div>
</div>

<div class="flex flex-row items-center justify-center gap-8 pb-8 md:hidden">
  {
    link && (
      <a class="flex flex-row items-center justify-center gap-2" href={link} target="_blank">
        <p class="text-[hsl(217,33%,17%)] underline dark:text-white">{t('portfolio.button.site')}</p>
        <i class="fa-solid fa-arrow-up-right-from-square text-[hsla(202,97%,24%,0.7)] dark:text-[#88d2fd] lg:text-3xl 2xl:text-2xl" />
      </a>
    )
  }
  {
    slug && (
      <a class="flex flex-row items-center justify-center gap-2" href={slug}>
        <p class="text-[hsl(217,33%,17%)] underline dark:text-white">{t('portfolio.button.details')}</p>
        <i class="fa-solid fa-arrow-up-right-from-square text-[hsla(202,97%,24%,0.7)] dark:text-[#88d2fd] lg:text-3xl 2xl:text-2xl" />
      </a>
    )
  }
</div>
